{% extends "base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'profiles/css/profile.css' %}">
{% endblock %}



{% block content %}

<div class="container py-2">
    <div class="p-1 bg-white rounded shadow mb-4 mt-4">
        <!-- Lined tabs-->

        <ul id="myTab2" role="tablist"
            class="nav nav-tabs nav-pills with-arrow lined flex-column flex-sm-row text-center border-0">
            <li class="nav-item flex-sm-fill">
                <a id="home2-tab" data-toggle="tab" href="#home2" role="tab" aria-controls="home2" aria-selected="true"
                    class="nav-link  mr-sm-3 rounded-0 active">My Profile</a>
            </li>
            <li class="nav-item flex-sm-fill">
                <a id="orders-tab" data-toggle="tab" href="#orders" role="tab" aria-controls="orders"
                    aria-selected="false" class="nav-link  rounded-0">My Orders</a>
            </li>
        </ul>
        <div id="myTab2Content" class="tab-content">
            <div id="home2" role="tabpanel" aria-labelledby="home-tab" class="tab-pane fade px-4 py-5 show active">

                <p class="">
                    <form action="{% url 'profile' %}" class="mt-3 " method="POST" id="profile-update-form">
                        {% csrf_token %}
                        {{ form|crispy }}
                        <div class="text-center">
                            <button class="btn buttons mb-1 profile1">Update Information</button>
                        </div>
                    </form>
                </p>

            </div>
            <div id="orders" role="tabpanel" aria-labelledby="orders-tab" class="tab-pane fade px-4 py-5">

                <p class="">
                    <div class="order-history table-responsive">
                        <table class="table table-sm table-borderless">
                            <thead>
                                <tr>
                                    <th>Actions</th>
                                    <th>Order List</th>
                                    <th class="date-hidden">Date</th>
                                    <th>Items</th>
                                    <th>Order Total</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for order in orders %}
                                <tr>
                                    <td>
                                        <button class=" btn order-track"><a
                                                href="{% url 'order_history' order.order_number %}"
                                                title="{{ order.order_number }}">
                                                View
                                            </a></button>


                                    </td>
                                    <td>
                                        <p>
                                            {{ order.order_number|slice:6 }}
                                        </p>
                                    </td>
                                    <td class="date-hidden">{{ order.date }}</td>
                                    <td>
                                        <ul class="list-unstyled">
                                            {% for item in order.lineitems.all %}
                                            <li class="small">
                                                {{ item.product.name }} x{{ item.quantity }}
                                            </li>
                                            {% endfor %}
                                        </ul>
                                    </td>
                                    <td>â‚¬{{ order.grand_total }}</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </p>

            </div>
        </div>
        <!-- End lined tabs -->
    </div>

</div>


{% endblock %}

{% block postloadjs %}
{{ block.super }}
<script type="text/javascript" src="{% static 'profiles/js/countryfield.js' %}"></script>
{% endblock %}