# The House of Books
## Table of Contents

- [About](https://github.com/biareiam/The-House-of-Books#about) 
- [UX (User Experience)](https://github.com/biareiam/The-House-of-Books#ux-user-experience)
  - [User Stories](https://github.com/biareiam/The-House-of-Books#user-stories)
- [Design Choices](https://github.com/biareiam/The-House-of-Books#design-choices)
  - [Fonts](https://github.com/biareiam/The-House-of-Books#font)
  - [Colors](https://github.com/biareiam/The-House-of-Books#colours)
  - [Imagery](https://github.com/biareiam/The-House-of-Books#imagery-and-content)
  - [Wireframes](https://github.com/biareiam/The-House-of-Books#wireframes)
- [Features](https://github.com/biareiam/The-House-of-Books#features)
  - [Site Navigation](https://github.com/biareiam/The-House-of-Books#site-navigation)
  - [Features Implemented](https://github.com/biareiam/The-House-of-Books#features-implemented)
  - [Future Features](https://github.com/biareiam/The-House-of-Books#future-features)
- [Web Marketing & Business]()
  - [Responsive Design](https://github.com/biareiam/The-House-of-Books#responsive-design)
  - [Defensive Design](https://github.com/biareiam/The-House-of-Books#defensive-design)
- [Datamodel](https://github.com/biareiam/The-House-of-Books#datamodel)
- [Technologies](https://github.com/biareiam/The-House-of-Books#technologies)
  - [Languages](https://github.com/biareiam/The-House-of-Books#languages)
  - [Frameworks and Libraries](https://github.com/biareiam/The-House-of-Books#frameworks-and-libraries)
  - [Tools](https://github.com/biareiam/The-House-of-Books#tools)
- [Testing](https://github.com/biareiam/The-House-of-Books#testing)
- [Deployment](https://github.com/biareiam/The-House-of-Books#deployment)
- [Credits](https://github.com/biareiam/The-House-of-Books#credits)
  - [Code](https://github.com/biareiam/The-House-of-Books#code)
  - [Content](https://github.com/biareiam/The-House-of-Books#content)
  - [Media](https://github.com/biareiam/The-House-of-Books#media)
  - [Acknowledgements](https://github.com/biareiam/The-House-of-Books#acknowledgements)

## About

House of Books is an eCommerce site aimed at book lovers looking for their next “new adventures”. The books are divided in different genres, making it easier for users to find what they are looking for. The site is designed to be responsive and easy to navigate on a range of devices to make it easily accessible for all users.
This site was built for educational reasons and no deliveries will be fulfilled.

Link to the [site](http://houseofbooks22.herokuapp.com/)

  
## UX (User Experience)
 
### User Stories

| User Story ID                 | As a/an           | I want to be able to...                                     | So that I can...                                                                           |
|-------------------------------|-------------------|-------------------------------------------------------------|--------------------------------------------------------------------------------------------|
| Viewing Products & Navigation |                   |                                                             |                                                                                            |
| 1                             | User/Shopper      | view individual products                                    | See what the books are about.                                                              |
| 2                             |                   | be able to add, edit quantity and remove items from my cart | buy it after browsing.                                                                     |
| 3                             |                   | see any special offers and new arrivals                     | take advantage of saving money on products I'd like to buy and be aware of new books.      |
| Registration and Accounts     |                   |                                                             |                                                                                            |
| 4                             | User/Shopper      | register for an account                                     | keep track of my orders and check my personal details, being able to update it if needed.  |
| 5                             |                   | receive email confirmation upon signing up                  | verify my set up was successful.                                                           |
| 6                             |                   | be able to reset my password in case I forget it            | regain access to my account.                                                               |
| 7                             |                   | have the ability to log in to the site with my details      | view my orders and personal details.                                                       |
| 8                             |                   | update my personal details.                                 | keep my personal information updated.                                                      |
| 9                             |                   | purchase from the site without having to create an account  | check out quickly and easily.                                                              |
| Searching products            |                   |                                                             |                                                                                            |
| 10                            | User/Shopper      | search for specific products                                | find books related to the keyword researched for.                                          |
| 13                            |                   | easily understand the search results                        | quickly decide which book interests me.                                                    |
| 14                            |                   | sort by price, name, category and rating                    | view a wide range and choose which book(s) I would like to purchase.                       |
| Checkout                      |                   |                                                             |                                                                                            |
| 15                            | Shopper           | have a running total of my bag                              | stay within my budget and be aware of my delivery cost.                                    |
| 16                            |                   | view my bag contents                                        | keep track of which books I have selected and how many of them.                            |
| 17                            |                   | adjust the quantity of books to buy                         | update the order without going back to the product page.                                   |
| 18                            |                   | easily enter my payment details                             | checkout as quickly and easily as possible.                                                |
| 19                            |                   | Save the information I just entered on the checkout         | Easily create an account and have my information already saved.                            |
| 20                            |                   | view the full order before entering card details.           | check it before confirmation and make sure I have all I want to purchase.                  |
| 21                            |                   | receive email notifications when I make an order            | confirm my order has been placed and refer back to.                                        |
| Admin/Management              |                   |                                                             |                                                                                            |
| 22                            | Store owner/Admin | add a product                                               | Sell new books in the site                                                                 |
| 23                            |                   | update a product                                            | change descriptions, proce, categories, and images of the books                            |
| 24                            |                   | delete a product                                            | remove books which are no longer available to be purchased. .                              |

## Design Choices
 
### Font
  A unique font was used on the site - [Sora](https://fonts.google.com/specimen/Sora).
  
### Colors
  The site uses tons of blue and black. 
  
### Imagery and content
  The images used were taken from these sources as well as the books descriptions, for education purpose:
 <br>
    - [Goodreads](https://www.goodreads.com/)
     <br>
    - [Easons](https://www.easons.com/)
    
### Wireframes
  The wireframes were created using Balsamiq and can be found bellow:
  
  Desktop, Tablet and Mobile:

  ![New Wireframe 1 copy 3](https://user-images.githubusercontent.com/65717229/175126159-9d5cd591-babb-478e-84b7-dede1f5053d1.png)
  
## Features

### Site Navigation
The navigation bar displays different links depending on whether the user is logged in, logged out or a super user.

|      Link     |  Not logged in |    Logged in  |  Logged in as super user |
|---------------|----------------|---------------|--------------------------|
| Logo          |           ✓    |           ✓   |                   ✓      |
| Search bar    |           ✓    |           ✓   |                   ✓      |
| Login in      |           ✓    |          ✗    |                  ✗       |
| Sign up       |           ✓    |          ✗    |                  ✗       |
| Profile Page  |          ✗     |           ✓   |                   ✓      |
| Log out       |          ✗     |           ✓   |                   ✓      |
| Add Products  |          ✗     |          ✗    |                   ✓      |


 ## Features Implemented
 
 ### Navigation
 Header
- All users, logged in or not, can:
  - Navigate to home, view the different categories, special offers, and new arrivals. 
  - Create or login into their profile page.
  - Check their bag.
  - Search for a book.
- Users logged in can access:
  - Navigate to home, view the different categories, special offers, and new arrivals. 
  - Check their profile page.
  - Logout from their account. 
  - Make a search for a book.
- Super user logged in can access:
  - Navigate to home, view the different categories, special offers, and new arrivals. 
  - Product management, where they can add products to the site. 
  - Check their profile page. 
  - Make a search for a book.
- Users who are not logged in can:
  - Navigate to home, view the different categories, special offers, and new arrivals. 
  - Access register and login page.
  - Make a search for a book.
 
 ### Create Profile
 - The users are able to:
    - Create a profile to store their personal information and check their order history.
    - Confirm their details are correct via email verification.

### Log in to the profile page 
 - The users are able to:
    - Log in to the profile page to see their orders history and personal information.
    - If needed, users can update their personal information.

### Products Page
- The users are able to:
    - See all the books for sale on the site
    - Sort it by A-Z, Name, Category, and Price.
    - Check the price of a book
    - Check the different categories
    - Check the rating of a book 
    - Check who is the author of the book
    - Check the image of the cover of the book

### Product Details Page
 - The users are able to:
    - Click the book cover to find out more about the book.
    - There, they can check the title of the book, author, rating, category, price and description. 
    - Add books to the cart.
    - Go back to the products page, if desired.
    - Super users are able to:
    -   Add, edit and delete books. 

### Products Management
- If a super user, the user can:
    - Add a book, including adding an image. In case, one is not provided, a default will be put in place. 
    - Edit the information related to the books
    - Delete a book not available for sale anymore. 

### Bag
 - The users are able to:
    - Adjust number of books on the cart
    - Find out delivery costs
    - Find out how much more they need to spend to get free delivery
    - Clearly see the total of their items by quantity and how much it will cost.
    - Remove and add the number of the existing books on the cart. 

### Checkout
- The users are able to:
    - Save time as personal details are pulled from the profile page if the user is logged in.
    - Save their delivery information to their profile.
    - Clearly see how much they will be charged for their items and delivery.
    - Can see a summary of their order before completing it.
    - Once the order is completed, the user can once again check the order, see the order number and be notified that a confirmation email was sent to the email provided.

### Footer 
- All users can access:
  - The social media links, terms and conditions and privacy policy pages.
- If the user is not logged in, they can see:
  - The different book categories.
  - Links to register and login. 
- If the user is logged in, they can see:
  - The different book categories.
  - Access their profile.
- If a superuser is logged in, he/she can see:
  - The different book categories.
  - Access their profile.
  - A link to product management. 

### Error pages
#### 404.html
- 404 pages created to redirect users back to the main site in case of an error.
  
#### 403.html
- 403 page created to redirect users back to the main site in case they try to access a page they are not authorized to.
  
#### 500.html
- 500 error page created to redirect users to the main site after a server error.

## Future Features
- A chat bot where users can ask questions on the site.
- The ability to add many filters to their search criteria at the same time or combine filters. 
- Give the user the ability to track their orders.
- A star rating or upvote functionality for the books.
- Add users' reviews to the site. 

## Web Marketing & Business

As part of web marketing a Facebook page was created for The House of Books.

![house](https://user-images.githubusercontent.com/65717229/175274998-7b2b56e4-6338-4ad6-8acc-c7005b647e4d.PNG)


## Responsive Design
The site was designed to be mobile first as more users are using their mobile to shop online but this has been adapted to allow the same good experience for desktop and tablet.

## Defensive Design

**Form Validation**
- Form validation has been added to every form to ensure all required information is included before submitting.
- If incorrect data is input, a warning text appears to notify the user that something is missing or gone wrong.

**Default Image if none added**
- In the event that a product is added without an image, a default image will be added. It is unlikely to happen due to the form validation, but just in case, a backup image was set.

**Unauthorized Attempts**
- An error is launched if a user attempts to visit a part of the site which they should not have access to. 

**@login_required**
- @login_required decorator added to restrict access to certain pages.
  - If a logged-out user tries to access a restricted page, they will be redirected to the login page.
  - Only authorized users may perform certain actions, such as add, edit, delete books.

**Bag**
- Validation was put into place to ensure a minimum of 0 product and maximum of 99 products is added to the bag. 
- In the case that 0 is selected the item is removed from the bag.
- Users can not add a negative number on the quantity of books to the bag.

## Database
- Postgres
- SQLite
    - Cloud based database to hold the product, user, and order fields.

### Data Model Design
  The database uses SQL through PostgreSQL and was originally formed from fixtures categories.json and products.json.The Datamodel schema is below :
  
  ![data scheme](https://user-images.githubusercontent.com/65717229/174303224-7288256e-8418-4d82-b845-d86eaac86ef5.png)

 ## Technologies
 
 ### Languages
 
**HTML5**
  - Used as the main markup language for the website content.
  
**CSS3**
  - Used to style the individual webpages.
  
**JavaScript**
  - Used to show the questions through pagination and for the game play.
  
**Python 3**
  - Used to run the site and database

 ### Frameworks and Libraries
- Django
    - High level framework used for rapid development of the site.
- Panda Library
    - It is a fast, powerful, flexible and easy to use open source data analysis and manipulation tool,
built on top of the Python programming language. It was used to create the most sold books section on the home page. 
 
## Tools
**Git** 
  - Git was used for version control (commit to Git and push to GitHub).
  
**GitHub**
  - Used to store, host and deploy the project files and source code after being pushed from Git. I also used it for the Project Kanban board to keep track and split tasks into smaller tasks to make them easier to fulfill.
  
**Gitpod**
  - An online IDE linked to the GitHub repository used to write my code.
  
**Heroku**
  - A Cloud Application Platform used to deploy the site.
  
**AWS** 
  - A cloud application to hold media files.
  
**Google fonts**
  - Used to compare and choose fonts.
  
**Favicons**
  - Used to generate a favicon for the website title.
  
**Lighthouse**
  - Used to audit the site for quality and ensure responsiveness.
  
**JSHint**
  - Used to detect errors in the JavaScript files.
  
**PEP8 Online**
  - Used to check PEP8 compliance in the code.
  
**W3C Markup Validator**
  - Markup validation service for HTML5.
  
## Testing

### Automated Testing

#### Bag

 Automated testing of views was completed to:
 
    - Test the calc_subtotal function works as expected.
    - Test the bag views work correctly.
    - Test if the url works when loading the page.
    - Test the correct template loads on page load.
    - Test the products page is accessible by name.
    - Test that the view_bag view works correctly.
    - Test that the add to bag view works as expected.
    - Test that the add_to_bag function adds the item to the bag.
    - Test that the add_to_bag view adds the product to the bag.
    - Test that the add_to_bag view increases the quantity of an item if the item is already present in the shopping bag.
    - Test that the adjusted bag view works as expected to calculate total.
    - Test that the add_to_bag view updates the quantity of an item if the item is already in the bag.
    - Test remove from bag view removes the product from the bag.
    - Test that the remove_from_bag view removes an item from the bag.
    - Test that the remove from bag view returns an error if something goes wrong.
    
**Checkout**

  Automated testing of views was completed to:
  
    - Test the checkout page loads correctly.
    - Test that the cache_checkout_data view works as expected.
    - Test if the url works when loading the page.
    - Test the correct template loads on page load.
    - Test the products page is accessible by name.
    - Test get checkout view when items are in the bag.
    - Test error msg appears when the bag empty.
    - Test error msg appears when no stripe key.

**Check if user is authenticated then autofill the form with details**

  Automated testing of models was completed to:
  
    - Test the order model.
    - Test order line model string method.
  
  Automated testing of forms was completed to:
  
    - Test to see if a full name field is required.
    - Test to see if an email field is required.
    - Test to see if a phone number field is required.
    - Test to see if a country field is required.
    - Test to see if town_or_city field is required.
    - Test to see if street_address1 field is required.
    - Check if the field only displays certain fields.

**Profiles**

  Automated testing of views was completed to:
  
    - Test if the url works when loading the page.
    - Test the correct template loads on page load.
    - Test the profile page is accessible by name.
    - Test if the profile form works if form is valid.
    - Test orders displayed on login to profile page.

  Automated testing of models was completed to:
  
    - Test retrieving the user profile.
    - Test the user profile string method returns the username.
    
  Automated testing of forms was completed to:
  
    - Test that none of the form fields are required.
    
**Products**

  Automated testing of views was completed to:
  
    - Test if the url works when loading the page.
    - Test the correct template loads on page load.
    - Test the products page is accessible by name.
    - Test products display.
    - Test categories sort functionality.
    - Test that the sort functionality works.
    - Test that the search functionality works as expected.
    - Test that the search error message displays correctly.
    - Test product detail page loads via url.
    - Test product detail page loads via name.
    - Test product detail page loads via template.

  Automated testing of models was completed to:
  
    - Test category model string method.
    - Testing category models friendly name string method returns friendly name.
    - Test product model string method.
    - Test that the product name is returned.
    - Test that the product description is returned.
    - Test whether a product has sizes or not.
    - Test whether a product has weights or not.

  Automated testing of forms was completed to:
  
    - Test to see if the review title field is required.
    - Test to see if a review field is required.
    - Check if the field only displays certain fields.
    - Test to see if the review title field is required.

**Blog**

  Automated testing of views was completed to:
  
    - Test the blog page loads correctly.
    - Test if the url works when loading the page.
    - Test the correct template loads on page load.
    - Test the blog page is accessible by name.
    - Test blog posts display as expected.
    - Test to see if the post string method returns the title as expected.

**Home Page**

  Automated testing of views was completed to:
  
    - Test if the url works when loading the page.
    - Test the correct template loads on page load.
    - Test the home page is accessible by name.
    - Test if the url works when loading the page.
    - Test the correct template loads on page load.
    - Test the privacy page is accessible by name.
    - Test if the url works when loading the page.
    - Test the correct template loads on page load.
    - Test the terms and conditions page is accessible by name.

### Manual Testing

**Browsers**

The site was tested on:
- Safari
- Google Chrome
- Firefox
- Devices Used
The site was tested on many different devices. 

#### Navigation
-  All users

| Feature      | Expected                                                            | Testing                      | Result                                                                                                                | Pass/Fail |
|--------------|---------------------------------------------------------------------|------------------------------|-----------------------------------------------------------------------------------------------------------------------|-----------|
| Home button  | To redirect to home page                                            | Click the home button        | Button navigates to home                                                                                              | Pass      |
| Navbar links | Clicking All books takes user to All books page                     | Click All books              | Redirected to All books page                                                                                          | Pass      |
|              | Clicking category takes user to the specific category page          | Click each category in turn  | Redirected to specific category page                                                                                  | Pass      |
|              | Click on bag icon and direct user to cart page                      | Click Bag                    | Redirected to cart page                                                                                               | Pass      |
|              | Clicking Blog takes user to the Blog homepage                       | Click Blog                   | Redirected to Blog Page                                                                                               | Pass      |
|              | Searching using Search Bar displays the books in the books page     | Type "fantasy" in search bar | Redirected to a page in which the relevant results are displayed, "fantasy" in the title or on the book description.  | Pass      |
| Footer       | Redirect to Facebook in new tab                                     | Click Facebook icon          | Facebook page opened in new tab                                                                                       | Pass      |
|              | Redirect to Instagram in new tab                                    | Click Instagram icon         | Instagram page opened in new tab                                                                                      | Pass      |
|              | Redirect to Twitter in new tab                                      | Click Twkitter icon          | Twitter page opened in new tab                                                                                        | Pass      |
|              | Redirect to Pinterest in new tab                                    | Click Pinterest icon         | Pinterest page opened in new tab                                                                                      | Pass      |
|              | Clicking T&Cs takes user to the Terms and Conditions page           | Click T&Cs                   | Terms and conditions page opened                                                                                      | Pass      |
|              | Clicking Privacy Policy takes user to the Terms and Conditions page | Click Privacy Policy         | Privacy Policy page opened                                                                                            | Pass      |

  - Users who are logged in 


| Feature      | Expected                                              | Testing                             | Result                                       | Pass/Fail  |
|--------------|-------------------------------------------------------|-------------------------------------|----------------------------------------------|------------|
| Navbar links | Clicking Profile takes user to their profile page     | Click Profile                       | Redirected to Profile Page                   | Pass       |
|              | Click LogOut logs out the user                       | Click Log Out, it logs out the user | User logged out and redirected to books page | Pass       |
|              | Click on the bag icon and is directed to the bag page | Click bag icon                      | Redirected to the bag page                   | Pass       |


  - Users who are not logged in


 | Feature      | Expected                                              | Testing         | Result                           | Pass/Fail  |
|--------------|-------------------------------------------------------|-----------------|----------------------------------|------------|
| Navbar links | Click Login redirects to log in page                 | Click Log In    | User redirected to Log In Page   | Pass       |
|              | Click Register redirects to log in page               | Click Register  | User redirected to Register Page | Pass       |
|              | Click on the bag icon and is directed to the bag page | Click bag icon  | Redirected to the bag page       | Pass       |


#### Home Page

| Feature       | Expected                                                                   | Testing             | Result                          | Pass/Fail  |
|---------------|----------------------------------------------------------------------------|---------------------|---------------------------------|------------|
| See more      | Clicking on the "see more" button and be redirected to the books page        | Click see more      | Redirected to the products page | Pass       |
| See all books | Clicking on the " see all books'' button and be redirected to the books page  | Click see all books | Redirected to the products page | Pass       |

#### Register Page

| Register functionality | Form validation for email requires @ symbol                                        | Attempt to register without @ in input field                        | Form validation requests valid email address               | Pass |
|------------------------|------------------------------------------------------------------------------------|---------------------------------------------------------------------|------------------------------------------------------------|------|
|                        | E-mail Again value must be same as Email value                                     | Attempt to register with incorrect email in email again input field | Form validation requests email address must match          | Pass |
|                        | Username must be between 4 and 15 characters                                       | Attempt to enter username with less than 4 characters               | Feedback error displayed                                   | Pass |
|                        | Username must be between 4 and 15 characters                                       | Attempt to enter username with more than 15 characters              | Form restricts the user from using more than 15 characters | Pass |
|                        | Password must be longer than 8 characters                                          | Attempt to enter password with less than 8 characters               | Form restricts the user from using less than 8 characters  | Pass |
|                        | Register with new user and password to be logged in and redirected to Profile page | Enter email address, name, username, password and click register    | New account registered and profile page shown              | Pass |

#### Log in Page

| Feature              | Expected                                                                                    | Testing                                           | Result                                                                              | Pass/Fail  |
|----------------------|---------------------------------------------------------------------------------------------|---------------------------------------------------|-------------------------------------------------------------------------------------|------------|
| Log in functionality | Correct user/pass combination directs user to their profile page with name displayed in tab | Log in with correct username/password combination | Redirected to user profile page with name displayed in tab                          | Pass       |
|                      | Incorrect username/password combination shows error message                                 | Attempt to log in with incorrect credentials      | "The username and/or password you specified are not correct." error message appears | Pass       |
| Link to Register     | Redirect to Register page                                                                   | Click link to register                            | Redirected to Register page                                                         | Pass       |

#### Profile Page

| Feature              | Expected                                                           | Testing                                                                          | Result                                                              | Pass/Fail |
|----------------------|--------------------------------------------------------------------|----------------------------------------------------------------------------------|---------------------------------------------------------------------|-----------|
| Personal Information | Personal information is visible if previously saved                | Navigate to Profile page, view personal information                              | The personal information is visible in Personal Information section | Pass      |
|                      | Personal information can be updated                                | Navigate to Profile page, change personal information, click update information. | The personal information is updated with the new details.           | Pass      |
| Order History        | Order History is visible if order placed while logged in           | Navigate to Profile page, view Order History Section                             | The Order History is visible                                        | Pass      |
|                      | Order information can be accessed by clicking on the "view" button | Navigate to Profile page, view Order History Section, click on "View" button     | Order Information is visible                                        | Pass      |

#### Book Products Pages

| Feature           | Expected                                             | Testing                                     | Result                                         | Pass/Fail  |
|-------------------|------------------------------------------------------|---------------------------------------------|------------------------------------------------|------------|
| All books visible | The books page shows all the available books         | Open the books page and view all the books  | All books visible                              | Pass       |
|                   | Searching by category shows books from that category | Select to search by each category           | Book from each category successfully displayed | Pass       |

#### Book Details Page

| Feature      | Expected                                                                      | Testing                                               | Result                    | Pass/Fail |
|--------------|-------------------------------------------------------------------------------|-------------------------------------------------------|---------------------------|-----------|
| Book Details | Book description, among other informations are displayed for individual books | Open Book Detail page and view the book's information | Books details visible     | Pass      |
| Add to bag   | Clicking Add to bag adds the book to the bag                                  | Open Book Detail page click add to bag                | Book displayed in the bag | Pass      |

#### Add products

| Feature         | Expected                                             | Testing                                                      | Result                                                                                 | Pass/Fail |
|-----------------|------------------------------------------------------|--------------------------------------------------------------|----------------------------------------------------------------------------------------|-----------|
| Add new books   | Only admin is allowed to visit add a new book        | Log in as non-superuser and attempt to access /products/add/ | Redirect to home page, error message displayed "Sorry, only store owners can do that." | Pass      |
| Form Validation | Required fields must be completed to add the product | Attempt to add product without filling in a required field   | Error message "Please fill in this field"                                              | Pass      |

#### Edit products

| Feature         | Expected                                                 | Testing                                                                 | Result                                                                                 | Pass/Fail |
|-----------------|----------------------------------------------------------|-------------------------------------------------------------------------|----------------------------------------------------------------------------------------|-----------|
| Edit books      | Only admin is allowed to visit edit a book's information | Log in as non-superuser and attempt to access /products/<item_id>/edit/ | Redirect to home page, error message displayed "Sorry, only store owners can do that." | Pass      |
| Form Validation | Required fields must be completed to edit the product    | Attempt to edit product without filling in a required field             | Error message "Please fill in this field"                                              | Pass      |

#### Bag

| Feature      | Expected                                                                     | Testing                                                                | Result                        | Pass/Fail |
|--------------|------------------------------------------------------------------------------|------------------------------------------------------------------------|-------------------------------|-----------|
| View Items   | Correct books are in the bag                                                 | Add book to bag, check quantity and total on the bag                   | Expected books are in the bag | Pass      |
| Update Items | Update the number of a books in the bag and it will reflect in bag and price | Change number of books in bag and check quantity and total has updated | Total and quantity updated    | Pass      |
| Remove Items | Click on the remove icon for item to be removed from the bag                 | Click remove beside relevant book                                      | Item removed from bag         | Pass      |

#### Checkout

| Feature         | Expected                                      | Testing                                                  | Result                                    | Pass/Fail |
|-----------------|-----------------------------------------------|----------------------------------------------------------|-------------------------------------------|-----------|
| View Items      | Correct books are in the checkout             | Add book to bag, click Checkout                          | Expected books are in the checkout list   | Pass      |
| Form Validation | Required fields must be completed to complete | Attempt to check out without filling in a required field | Error message "Please fill in this field" | Pass      |


### User Stories Testing
| User Story ID                 | As a/an           | I want to be able to...                                     | So that I can...                                                                          | Testing                                                                                        | Result |
|-------------------------------|-------------------|-------------------------------------------------------------|-------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------|--------|
| Viewing Products & Navigation |                   |                                                             |                                                                                           |                                                                                                |        |
| 1                             | User/Shopper      | view individual products                                    | See what the books are about.                                                             | View Products Page                                                                             | Pass   |
| 2                             | User/Shopper      | be able to add, edit quantity and remove items from my cart | buy it after browsing.                                                                    | Add product to bag, view toast, update item quantity, remove from bag                          | Pass   |
| 3                             | User/Shopper      | see any special offers and new arrivals                     | take advantage of saving money on products I'd like to buy and be aware of new books.     | Navigation bar displays free shipping if shopper spends €20 or more                            | Pass   |
| Registration and Accounts     |                   |                                                             |                                                                                           |                                                                                                |        |
| 4                             | User/Shopper      | register for an account                                     | keep track of my orders and check my personal details, being able to update it if needed. | Users can register for an account and view their orders in the profile page                    | Pass   |
| 5                             |                   | receive email confirmation upon signing up                  | verify my set up was successful.                                                          | User receives email when they register for an account                                          | Pass   |
| 6                             |                   | be able to reset my password in case I forget it            | regain access to my account.                                                              | User can request email to reset their password                                                 | Pass   |
| 7                             |                   | have the ability to log in to the site with my details      | view my orders and personal details.                                                      | Users can log in using their registered details and view their orders and personal details     | Pass   |
| 8                             |                   | update my personal details.                                 | keep my personal information updated.                                                     | Users can update their personal details in the profile section                                 | Pass   |
| 9                             |                   | purchase from the site without having to create an account  | check out quickly and easily.                                                             | Users can use the checkout without registering for an account                                  | Pass   |
| Searching products            |                   |                                                             |                                                                                           |                                                                                                |        |
| 10                            | User/Shopper      | search for specific products                                | find books related to the keyword researched for.                                         | Users can search, on the site for products and if no product available message to confirm this | Pass   |
| 13                            |                   | easily understand the search results                        | quickly decide which book interests me.                                                   | Users can search for products and quickly see how many match their criteria                    | Pass   |
| 14                            |                   | sort by price, name, category and rating                    | view a wide range and choose which book(s) I would like to purchase.                      | Users can sort by price, name and category on the books page                                   | Pass   |
| Checkout                      |                   |                                                             |                                                                                           |                                                                                                |        |
| 15                            | Shopper           | have a running total of my bag                              | stay within my budget and be aware of my delivery cost.                                   | Users can see the total in the bag icon on the navbar.                                         | Pass   |
| 16                            |                   | view my bag contents                                        | keep track of which books I have selected and how many of them.                           | Users can view their bag to see which products and quantities have been added                  | Pass   |
| 17                            |                   | adjust the quantity of books to buy                         | update the order without going back to the product page.                                  | Users can update quantities in the shopping bag successfully. see before, after                | Pass   |
| 18                            |                   | easily enter my payment details                             | checkout as quickly and easily as possible.                                               | Users can navigate the checkout form payment input easily                                      | Pass   |
| 19                            |                   | Save the information I just entered on the checkout         | Easily create an account and have my information already saved.                           | Users can save thier information, if not saved yet, on the checkout page                       | Pass   |
| 20                            |                   | view the full order before entering card details.           | check it before confirmation and make sure I have all I want to purchase.                 | The Order can be viewed on the checkout page before entering card details                      | Pass   |
| 21                            |                   | receive email notifications when I make an order            | confirm my order has been placed and refer back to.                                       | Users receive an email when they make an order                                                 | Pass   |
| Admin/Management              |                   |                                                             |                                                                                           |                                                                                                |        |
| 22                            | Store owner/Admin | add a product                                               | Sell new books in the site                                                                | Super users can add a new book                                                                 | Pass   |
| 23                            |                   | update a product                                            | change descriptions, proce, categories, and images of the books                           | Super users can edit the book's information                                                    | Pass   |
| 24                            |                   | delete a product                                            | remove books which are no longer available to be purchased. .                             | Super users can delete a book                                                                  | Pass   |


### Validators
- W3C HTML Validator Passed tests without issues
- W3C CSS Validator Passed tests without issues
- PEP8 and AUTOPEP8. Online PEP8 warned about some long lines on the settings.py. 

### Deployment

#### Gitpod Workspaces

1. Starting from GitHub clone the Code Institute template by clicking Use This Template and copying to my repository under the name biareiam. The workspace is then launched by clicking GitPod - this action only needs to be performed once and then workspace reopened from GitPod.
2. Start the Gitpod Workspace which opens an online IDE editor window.

#### Gitpod branching and committing to GitHub

**Deploying to Heroku**

The project has been deployed to Heroku and AWS. The steps for deployment were:
 
Create an account in Heroku;
Create a new app in Heroku: choose a unique name and region;
On the resources tab provide a new Postgres database (used free plan for this project);
Go back to gitpod and install dj_database_url and psycopg2 and freeze the requirements in requirements.txt file to ensure Heroku installs our apps requirements when we deploy;
In settings.py import dj_database, comment out the default database configuration, replace it with a call to dj_database_url.parse and give it the database URL from Heroku (which can be found in the settings tab);
Migrate all the changes;
Import all the books, categories and subcategories using the command 'python3 manage.py load “data name”';
Create a super user using command 'python3 manage.py createsuperuser' and follow terminal instructions;
Create an if statement in settings.py to allow the system to take the database from os.environ if it exists otherwise it will use the default configuration.
Create a Procfile to tell Heroku to create a web dyno;
Temporarily disable collect_static using command 'heroku config:set DISABLE_COLLECT_STATIC=1';
In settings.py add the hostname of the heroku app and a localhost so that gitpod will keep working;
Deploy to Heroku;
In Heroku, inside the app, go to the Deploy tab and set it to deploy to github, search for the project repository and click connect. Once connected set up automatic deploys (due to recent issues shared by the Heroku team automatic deploys have been temporarily disabled);
Generate a secret key for the Heroku app and add it to the env.py file (which is included in .gitignore file to keep all the keys secret and safe);
In settings.py set up debug to true only if there is a variable called development in the environment;
Deployment to AWS S3:
Navigate to https://aws.amazon.com/ and create an account;
Once logged in, from the AWS Management Console page, find the S3 service in the 'Find Services' search bar to create a new bucket where our files will be stored;
Create a bucket:
With a matching name with your app to keep things organized;
Select your closest region;
Uncheck 'block all public access' and acknowledge that the bucket will be public;
Under Bucket Ownership section select 'ACLs enabled';
Select Create Bucket;
Inside our new bucket:
In the properties tab turn on static website hosting to create a new endpoint accessible from the internet;
In the permissions tab we will make 3 changes:
Paste in new CORS Configuration: [ { "AllowedHeaders": [ "Authorization" ], "AllowedMethods": [ "GET" ], "AllowedOrigins": [ "*" ], "ExposeHeaders": [] } ]
In the policy tab click on policy generator and create a new policy and copy it in the policy editor and before saving add /* at the end of the resource key to allow access to all resources in the bucket;
In the Access Control List tab click edit and enable List for Everyone (public access) and accept the warning box;
Now that the bucket is ready, we need to create a user to access it, we will create through the service called IAM (Identity Access Management):
Access IAM through the Services menu;
Click User Groups on the side menu and click Create New Group and call it manage-houseofbooks-v3 (to match our website again and have consistency) and click on Create Group;
On the side menu click on Policies and then click on Create Policies;
In the JSON tab select 'import managed policy' which will let us import the 'S3 Full Access Policy' that AWS has pre-built for full access to S3. But because we only want to allow full access to our bucket we need to get the bucket ARN from the bucket policy page in S3 and paste it under Resource as a list. We will paste twice, the first item is the ARN as it is and the second item with /* at the end to add another rule for all files and folders in the bucket;
Click review policy, give it a name and description and click Create Policy;
To attach the policy to the group we created click on User Groups, select manage-houseofbooks-v3, click Attach Policy, search policy created, select it and click Attach Policy;
Now we need to create a user to put in the group: click Users in the sidebar menu;
Create the user houseofbooks-v3-staticfiles-user, select Programmatic Access and select Next;
From the list provided select manage-houseofbooks-v3 and click Create User;
Click on 'Download .csv' which will contain the users access key and secret access key that we will use to authenticate them from our Jango app. It is very important you download and save this CSV file as it won't be downloadable again after this process.
Configure Django to connect to S3 using the keys we just created:
In settings.py file, under the Static Files section create an IF statement to check if there is an environment variable called USE_AWS in the environment;
In the IF statement define the AWS_STORAGE_BUCKET_NAME, AWS_S3_REGION_NAME, access key and secret access key we will get from the environment to keep them secure;
In Heroku, in the Config Vars section of the Settings tab:
Add the AWS keys;
Set USE_AWS to True;
Remove the DISABLE_COLLECTSTATIC variable;
In settings.py in gitpod set up the bucket name;
Create a new file called custom_storages.py:
Import settings from django and s3boto3 storage class from django storages;
Create a new class called static_storages that inherits from django s3boto3;
Tell the class that we want to store static files in a location from the settings that we'll define in a moment;
Create an exact same class but for media;
In settings.py and set a variable that points to the new storage classes we just created and that the location it should save static files is a folder called 'static'. Do the same for media files;
Now we need to override and explicitly set the URLs for static and media files using our custom domain and the new locations.
Deploy to Heroku. Once the deployment to Heroku is successful, if we go to S3, we can see that we have a static folder in our bucket with all our static files in it. Basically, what is happening now, when our project is deployed to Heroku, it will run python3 manage.py collectstatic during the build process and will search through all the apps and project folders looking for static files. It will use the S3 custom domain setting with our custom storage classes that will tell the location where we want to save things. This means that when USE_AWS is set to TRUE, whenever collectstatic is run, static files will be collected into a static folder in our s3 bucket;
Go to S3 and create a new folder called 'media', inside this folder click 'upload', 'add files' and then select all the book cover images.
Stripe:
Add all the Stripe keys to the Heroku Config Variables;
Create a new Stripe wehbhook endpoint using the new address: http://houseofbooks22.herokuapp.com/;
Test the webhook is working correctly by creating and test order through our new deployed site in Heroku;

if you can not deploy through Heroku, it is possible to do it through Gitpod.

#### How to run the project locally
To clone this project from GitHub follow the instructions taken from GitHub Docs explained here:
  
1. Navigate to the GitHub Repository
2. To clone using HTTPS click the clipboard symbol under "Clone with HTTPS". To clone using SSH key click Use SSH then click the clipboard symbol. To clone using GitHub CLI select Use GitHub CLI and click the clipboard symbol.
3. Open Git Bash
4. Change the working directory to the location you want the cloned directory to be.
5. Type 'git clone' and paste the url copied from step 3.
6. Press 'enter' to create your clone.

### Credits
#### Code
- A good portion of the Django, Python and JavaScript code was developed following the Code Institute's Boutique Ado walkthrough.
- CodeInstitute Full Stack Developer Course.
- Code from - https://mdbootstrap.com/docs/standard/components/carousel/ - was used as inspiration for the creation of the carousel of the home page. 
- Code from - https://mdbootstrap.com/docs/standard/components/carousel/ - was used as inspiration to create the footer.
- Code from https://stackoverflow.com/questions/55023534/how-to-get-10-of-the-best-seller-selling-products-in-django was used as an inpsiration to create the most sold books on the home page. 
- Code from https://www.geeksforgeeks.org/e-commerce-website-using-django/ was used as an inpsiration to create the ecommerce site. 
- Code from https://www.educative.io/answers/what-are-built-in-error-views-in-django was used as an inpsiration to create the error pages. 

    
#### Content
  - Terms and conditions, privacy page sources from https://www.termsfeed.com/
  
#### Media
  - All product images and descriptions were sourced from Goodreads and Easons. 

#### Acknowledgements

Thanks to my friend Authur Pereira Neto for all the support and help throughout this project, and the Slack groups.

Disclaimer
If there are any issues with the copyright of the content, please contact me. I will fix that as soon as possible. This project is for educational purposes only.

Beatriz Amorim


